/*
 * Light JavaScript Library
 * 
 * @copyright Copyright 2011, alipay.com
 * @author janlay@gmail.com
 *
 * $Author$, $Revision$
 * $Date$
 */
(function(f,g){var b=f.document,e=f.navigator,d=f.location;var c=f.light||(function(){var m,k,i=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?([^?#]*))?/;try{k=d.href}catch(l){k=b.createElement("a");k.href="";k=k.href}m=i.exec(k.toLowerCase())||[];var h={version:"0.1",timestamp:new Date().getTime(),debug:m[2].indexOf("alipay.com")===-1,baseDomain:function(){var n=m[2].split(".");return n.length>2?n[n.length-2]+"."+n[n.length-1]:m[2]}(),urlParts:m,toString:function(){var n="Light JavaScript Library version "+h.version;if(h.debug){n+=", debug enabled"}n+=".";return n},toArray:function(n){return Array.prototype.slice.apply(n)},register:function(v,t,p){var r=v.split("/"),u=t||h;if(!r[0]){u=f;r.shift()}var n,s=u;for(var q=0,o=r.length-1;q<o;q++){if(!(n=r[q])){continue}u=u[n]=u[n]||{}}n=r[q];if(n){u=u[n]=p===g?{}:p}return u},extend:function(w){var v=h.toArray(arguments);if(typeof v[0]!=="boolean"){v.unshift((w=false))}if(v.length<2){return v[1]}var p=2,q=v[1],t;if(v.length===2){p=1;q=h}for(var u=p,r=v.length;u<r;u++){t=v[u];if(!t||typeof t!=="object"){continue}for(var n in t){var x=t[n];if(x===q||!t.hasOwnProperty(n)){continue}if(h.isArray(x)){q[n]=Array.prototype.concat.call(x)}else{if(w&&x instanceof Object&&!h.isFunction(x)){var s=q[n]||{};q[n]=h.extend(true,s,t[n])}else{if(x!==g){q[n]=x}}}}}return q},deriveFrom:function(o,p,q){if(arguments.length<2){return o}var n=(p&&p.init)||function(){o.constructor.apply(this,arguments)};h.extend(true,n.prototype,o.prototype,p);n.constructor=n;q&&h.extend(true,n,q);n.__super=o;return n},module:function(n,p){var q=h.register(n,null,p);if(h.isFunction(p)){q.constructor=p}return q},each:function(p,s,o){if(!p){return p}var r=p.length;if(r!==g&&"reverse" in p){var q=0;while(q<r){if(s.call(p[q],q,p[q],p)===false){break}q++}}else{var n;for(n in p){if(s.call(p[n],n,p[n],p)===false){break}}}return p},isFunction:function(n){return h.type(n)==="function"},isArray:Array.isArray||function(n){return h.type(n)==="array"},isWindow:function(n){return n&&typeof n==="object"&&"setInterval" in n},type:function(n){return(n===null||n===g)?String(n):j[Object.prototype.toString.call(n)]||"object"},has:function(r){if(!r){return false}var q=r.split("/"),p=h,o,n;if(!q[0]){p=f;q.shift()}for(o=0,n=q.length;o<n;o++){p=p[q[o]];if(p===g){return false}}return true},noop:function(){}};var j={};h.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(o,n){j["[object "+n+"]"]=n.toLowerCase()});return h})();c.log||c.extend({log:function(){if(!c.debug||!f.console||!console.log){return function(){try{f.console&&console.log&&console.log.apply(console,arguments)}catch(h){}}}if(Function.prototype.bind){return function(){var h=Function.prototype.bind.call(console.log,console);h.apply(console,arguments)}}else{if(console.log.apply){return function(){console.log.apply(console,arguments)}}else{return console.log}}}(),inspect:function(k){if(f.JSON&&JSON.stringify){return JSON.stringify(k)}else{if(typeof k==="object"){var j,h=[],i=k||a;for(var l in i){if(typeof(j=i[l])=="object"){h.push(arguments.callee(j))}else{h.push(l+"="+i[l])}}return h.join("\n")}else{return String(k)}}},track:function(){var h=[],i=function(j){if(f.Tracker){Tracker.click(j)}else{h.push(j);f.setTimeout(function(){i(h.shift())},100)}};return function(k,m){if(!k){return}if(m){var l=c.client.info,j=l.browser.version;j=j?j[0]:"na";k+="-"+(l.browser.name||"na")+"-"+(l.engine.name||"na")+"-"+j}i(k)}}(),trim:function(h){if(!h){return""}return String.prototype.trim?String.prototype.trim.apply(h):h.replace(/^\s+|\s+$/g,"")},substitute:function(h,i){if(!h){return""}if(!i){return h}if(typeof h!=="string"){throw"invalid template"}return h.replace(new RegExp("{\\w+}","gmi"),function(j){var k=j.substr(1,j.length-2);return k in i?i[k].toString():""})},encode:encodeURIComponent||escape,decode:decodeURIComponent||unescape,param:function(k,j,i){j=j||"=";var h=[];c.each(k,function(m,l){if(!m||!k.hasOwnProperty(m)){return}h.push(c.encode(m)+j+c.encode(l))});return h.join(i||"&")},unparam:function(k,i,h){var j={};if(!k){return j}i=i||"=";c.each(k.split(h||"&"),function(l,m){var n=m.split(i,2);if(!n[0]||n.length!==2){return}j[c.decode(n[0])]=c.decode(n[1])});return j},trimTag:function(h){if(!h||!b.createElement){return""}var i=b.createElement("DIV");i.innerHTML=h;var j=i.textContent||innerText||"";i=null;return j},escapeHTML:function(h){if(!h){return""}var i=h.replace(/>/g,"&gt;");i=i.replace(/</g,"&lt;");i=i.replace(/&/g,"&amp;");i=i.replace(/"/g,"&quot;");i=i.replace(/'/g,"&#039;");return i},unescapeHTML:function(i){if(!i){return""}var h=i.replace(/&gt;/g,">");h=h.replace(/&lt;/g,"<");h=h.replace(/&amp;/g,"&");h=h.replace(/&quot;/g,'"');h=h.replace(/&#039;/g,"'");return h},toJSON:function(i){if(typeof i!=="string"||!i){return null}var h=c.trim(i);return f.JSON&&JSON.parse?JSON.parse(h):(new Function("return "+h))()}});c.has("client/info")||(function(){var p=e.userAgent?e.userAgent.toLowerCase():"",h=e.platform||"",o=e.vendor||"",m=f.external;var k={device:{pc:"windows",ipad:"ipad",ipod:"ipod",iphone:"iphone",mac:"macintosh",android:"android",nokia:/nokia([^\/ ]+)/},os:{windows:/windows nt (\d)\.(\d)/,macos:/mac os x (\d+)[\._](\d+)(?:[\._](\d+))?/,linux:"linux",ios:/iphone os (\d)[\._](\d)/,android:/android (\d)\.(\d)/,chromeos:/cros i686 (\d+)\.(\d+)(?:\.(\d+))?/,windowsce:p.indexOf("windows ce ")>0?/windows ce (\d)\.(\d)/:"windows ce",symbian:/symbianos\/(\d+)\.(\d+)/,blackberry:"blackberry"},engine:{trident:/msie (\d+)\.(\d)/,webkit:/applewebkit\/(\d+)\.(\d+)/,gecko:/gecko\/(\d+)/,presto:/presto\/(\d+).(\d+)/},browser:{"360":function(){if(!i.os.windows){return false}if(m){try{return m.twGetVersion(m.twGetSecurityID(f)).split(".")}catch(q){try{return m.twGetRunPath.toLowerCase().indexOf("360se")!==-1||!!m.twGetSecurityID(f)}catch(q){}}}return/360(?:se|chrome)/},mx:function(){if(!i.os.windows){return false}if(m){try{return(m.mxVersion||m.max_version).split(".")}catch(q){}}return p.indexOf("maxthon ")!==-1?/maxthon (\d)\.(\d)/:"maxthon"},sg:/ se (\d)\./,tw:function(){if(!i.os.windows){return false}if(m){try{return m.twGetRunPath.toLowerCase().indexOf("theworld")!==-1}catch(q){}}return"theworld"},qq:function(){return p.indexOf("qqbrowser/")>0?/qqbrowser\/(\d+)\.(\d+)\.(\d+)(?:\.(\d+))?/:/tencenttraveler (\d)\.(\d)/},ie:p.indexOf("trident/")>0?/trident\/(\d+)\.(\d+)/:/msie (\d+)\.(\d+)/,chrome:/chrome\/(\d+)\.(\d+)\.(\d+)(?:\.([ab\d]+))?/,safari:/version\/(\d+)\.(\d+)(?:\.([ab\d]+))? safari\//,firefox:/firefox\/(\d+)\.([ab\d]+)/,opera:/opera.+version\/(\d+)\.([ab\d]+)/},feature:{"64bitBrowser":"win64; x64;","64bitOS":/win64|wow64/,security:/ (i|u|s|sv1)[;\)]/,simulator:function(){return i.os.ios&&screen.width>960}}};var l=-1,j=0,i={},n=function(u,q,t){var w;if(!i[u]||!(w=i[u][q])){return false}if(!t){return true}var z=t;if(typeof z==="string"){z=z.split(".")}else{if(typeof z==="number"){z=[z]}}var y,x;for(var r=0,s=Math.max(z.length,w.length);r<s;r++){y=parseInt(z[r],10)||0;x=parseInt(w[r],10)||0;if(y!==x){return y<x}}return true};c.each(k,function(s,q){i["has"+s.charAt(0).toUpperCase()+s.slice(1)]=function(u,t){return n(s,u,t)};var r=i[s]={};c.each(q,function(w,A){var t=[j],z=c.isFunction(A)?A.apply(i):A;if(z){if(z===true){t=[l]}else{if(typeof z==="string"){t=[p.indexOf(z)!==-1?l:j]}else{var u=z;if(z.exec){u=z.exec(p)||[];u.length&&u.shift()}for(var x=0;x<u.length;x++){t[x]=parseInt(u[x],10)||0}}}}var y=!!t[0];if(y){r[w]=r.version=t;r.name=w}return !y})});if(!i.engine.name&&indow.ActiveXObject){if(b.documentMode){i.engine.trident=i.engine.version=[b.documentMode,0]}else{if(!i.engine.trident){i.engine.trident=i.engine.version=[l]}}i.engine.name="trident"}else{if(!i.os.windows&&i.hasEngine("trident",6)){i.os.windows=i.os.version=[l];i.os.name="windows"}}if(i.browser.ie&&p.indexOf("trident/")>0){i.browser.ie[0]=i.browser.version[0]=i.browser.version[0]+4}c.module("client/info",i)})();f.light=c})(this);
/*
 *
 * Alipay Log Analytics Module, v1.0
 * @author taibo, janlay@gmail.com, Sep 20, 2011
 * $Id: tracker.js 18858 2011-09-28 09:55:42Z qiuping.zhou $
 * Copyright 2010-2011 Alipay, All Rights Reserved.
 *
 **/
this.Tracker||(function(v){var g=v,H=g.document,u,x,o="//kcart.alipay.com/web/bi.do",y=20000,b=8,A="BIProfile",w="clk",c={p:""};if(g.performance){x=performance.timing.navigationStart}else{if(g._to&&_to.start){x=_to.start.getTime()}}g.Tracker=u=function(){};u.prototype={watch:function(){u.click("tracker-watch")}};u.extend=function(I){for(var t=1,p=arguments.length;t<p;t++){for(var J in arguments[t]){if(arguments[t].hasOwnProperty(J)){I[J]=arguments[t][J]}}}return I};u.log=function(){g.console&&console.log&&console.log(Array.prototype.slice.call(arguments).join(" | "))};u.version="1.0";u.enabled=true;u.debug=false;u.seedName="seed";u.minInterval=1000;u.chain=["_init"];u.dispatchEvent=function(t,p,I){if(t.attachEvent){t.attachEvent("on"+p,function(J){I.call(t,J)})}else{if(t.addEventListener){t.addEventListener(p,I,false)}else{t["on"+p]=function(J){I.call(t,J)}}}};u.getTarget=function(I){var t=I.target||I.srcElement;try{if(t&&t.nodeType===3){return t.parentNode}}catch(p){}return t};u.inArray=function(I,J){if(J.indexOf){return J.indexOf(I)}for(var p=0,t=J.length;p<t;p++){if(J[p]===I){return p}}return -1};u.send=function(J,I,t){if(typeof J!=="string"||!J){throw"Invalid page"}var K=new u.Param();K.add("ref",I||"-");K.add("pg",J);K.add("rnd",x||(new Date()).getTime());K.add("v",u.version);t&&K.add(t);if(location.protocol!="file:"&&!u.debug){var p=new Image(1,1);p.onload=function(){p.onload=null};p.src=o+"?"+K}else{if(g.console&&console.log){u.log(K.toString())}}};u.Param=function(t,p){this.splitter=t||"&";this.connector=p||"=";this.clear()};u.Param.prototype={add:function(I,J){if(I instanceof u.Param){for(var t=0,p=I.items.length;t<p;t++){var K=I.items[t].split(I.connector,2);this.add(decodeURIComponent(K[0]),decodeURIComponent(K[1]))}}else{this.items.push(encodeURIComponent(I)+this.connector+encodeURIComponent(J))}},clear:function(){this.items=[]},unique:function(){this.add("rnd",new Date().valueOf())},addClientInfo:function(){var t="-",I="-",J=navigator;if(window.screen){t=screen.width+"x"+screen.height;I=screen.colorDepth+"-bit"}else{if(window.java){var p=java.awt.Toolkit.getDefaultToolkit().getScreenSize();t=p.width+"x"+p.height}}this.add("screen",t);this.add("color",I)},toString:function(){return this.items.join(this.splitter)}};if(H&&g.location){var z=new u.Param(),h=location.href,i=H.referrer;z.addClientInfo();z.add("utmhn",location.hostname);g.analytic_var&&z.add("ana",analytic_var);if(window.light&&light.client){var B=light.client.info,k,F,E,G="";k=(B.os.name||"na")+"/"+(B.os.version||[-1]).join(".");F=(B.browser.name||"na")+"/"+(B.browser.version||[-1]).join(".");E=(B.engine.name||"na")+"/"+(B.engine.version||[-1]).join(".");G=k+"|"+E+"|"+F;z.add("_clnt",G)}u.send(h,i,z);i=h;z.clear();if(!parseInt(Math.random()*b,10)){z.add("BIProfile","load");var r=0,n=0,s=100;var C=function(){r=(new Date()).getTime()-x;if(C.invoked){return}C.invoked=true;if(r>y){m.invoked=true;z.add("tm","-x-");u.send(h,"",z)}},m=function(){n=(g._to&&_to.end?_to.end.getTime():new Date().getTime())-x;if(g.performance){n=performance.timing.loadEventStart-performance.timing.navigationStart}if(r>y||m.invoked){return}m.invoked=true;j()},j=function(){if(!r){setTimeout(j,50);return}if(r>n){r=n-s}if(r<50){return}z.add("tm",""+r+"x"+n);u.send(h,"",z)};if(x){setTimeout(function(){if(g.YAHOO&&YAHOO.util&&YAHOO.util.Event){YAHOO.util.Event.onDOMReady(C)}else{if(g.jQuery){jQuery(C)}else{if(g.Y&&Y.on){Y.on("domready",C)}else{C()}}}},0);if(g._to&&_to.end){m()}else{g.setTimeout(m,y*8);u.dispatchEvent(g,"load",m);u.dispatchEvent(g,"unload",m)}}}}var q=[],l=function(t){var M=(""+t).replace("^\\s|\\s$","");if(!M.length){return false}var p={index:8,enabled:true,matches:[]},K=M.split("&"),L,J,I;while((L=K.shift())){if(!L){continue}J=L.split("=",2);if(J.length===2){if(J[0]==="index"){I=parseInt(J[1],10)}else{if(J[0]==="enabled"){I=J[1]=="1"||J[1]==="true"}else{I=decodeURIComponent(J[1])}}if(J[0]==="match"){p.matches.push(I)}else{p[J[0]]=I}}else{p.name=J[0]}}return p},e=function(J){var p=J.matches.length;if(!J.enabled||!p){return}var t="[a-z_][a-z0-9_|\\-]*";for(var K=0;K<p;K++){var N=J.matches[K];N=N.replace(/@/g,J.name);if(!(new RegExp("(^|>)"+J.name+"(>|$)","i").test(N))){continue}N=N.replace(/(\d)~(\d)([a-z_][a-z0-9_|-]*)/ig,function(R,Q,O,P){if(Q<1||O<=Q){return""}return"("+P+">){"+(Q-1)+","+(O-1)+"}"+P});N=N.replace(/(\d)([a-z_][a-z0-9_|-]*)/ig,function(P,Q,O){if(Q<1){return""}return"("+O+">){"+(Q-1)+"}"+O});N=N.replace(/(\d)~(\d)#/g,function(Q,P,O){if(P<1||O<=P){return""}return"("+t+">){"+(P-1)+","+(O-1)+"}"+t});N=N.replace(/(\d)#/g,function(O,P){if(P<1){return""}return"("+t+">){"+(P-1)+"}"+t});N=N.replace(/#/g,t);if(!N){continue}var L=new RegExp("(^|>)("+N+")$","i");var I=0,M=q.length;while(I<M&&J.index>=q[I].index){I++}q.splice(I,0,{index:J.index,pattern:L})}};var D,d=function(M){if(!u.enabled){return}var J=(new Date()).getTime();D=J;u.chain.push(M);u.chain.length>16&&u.chain.shift();var L=u.chain.join(">"),t=M,I;for(var K=0,p=q.length;K<p;K++){if((I=L.match(q[K].pattern))){t=I[2];break}}f(t)};H&&u.dispatchEvent(H,"mousedown",function(I){var t=u.getTarget(I);if(!t||!t.nodeType){return}while(t&&t.nodeName!="HTML"&&!t.getAttribute(u.seedName)){t=t.parentNode}if(!t||t.nodeType!==1||t.nodeName=="HTML"){return}var p=t._tc;if(!p){p=l(t.getAttribute(u.seedName));if(!p){return}e(p);t._tc=p}d(p.name)});var f=function(){var p=location.href,t=location.href.split("?").shift();t+="?seed=";return function(J){if(!J){return}var L=J.split(":",2);L.length===2||L.unshift(w);var I=L[0];var K=t+encodeURIComponent(L[1]);var M=new u.Param();I&&M.add("BIProfile",I);u.send(K,p,M);p=K}}();u.click=function(p){config=l(p);if(!config){return}d(config.name)}})(this);