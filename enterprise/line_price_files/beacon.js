(function(){var a=true;if(window.MAGNETO===undefined){MAGNETO={};a=false}MAGNETO.globals={win:window,doc:document,opener:opener,pageId:null,jsUrlRoot:"http://style.c.aliimg.com/sys/js/beacon/v1/",jsUrlHash:{flash:"plugins/client/flash.js",html5:"plugins/client/html5.js"},customize:window.WolfSmoke||{},protocol:document.location.protocol,isConflicted:a,version:"41"}})();(function(a){var b=a.globals,c=b.customize;a.config={samplerate:c.samplerate||1,siteNo:c.siteNo||2,logSeverOne:b.protocol+"//dmtracking.1688.com/b.jpg",logSeverTwo:b.protocol+"//dmtracking.1688.com/c.jpg",tracelogSever:b.protocol+"//stat.1688.com/tracelog/click.html",errorSever:b.protocol+"//stat.1688.com/dw/error.html",acookieSever:b.protocol+"//acookie.1688.com/1.gif",isSetCookieToAcookie:c.isSetCookieToAcookie||true,needDefaultCookies:["cna","ali_apache_id"],isCheckLogin:true}})(MAGNETO);(function(a){var c=a.globals,d=a.config,b;a.tools={is:function(e,f){return e!=null&&Object(e) instanceof f},isFunction:function(e){return(typeof e==="function")||Object.prototype.toString.apply(e)==="[object Function]"},isNumber:function(e){return typeof e==="number"&&isFinite(e)},isString:function(e){return typeof e==="string"},isArray:Array.isArray||function(e){return Object.prototype.toString.apply(e)==="[object Array]"},isEmptyObject:function(f){for(var e in f){return false}return true},combineJson:function(k,h,l){var f={};for(var g in h){if(l||!k.hasOwnProperty(g)){f[g]=h[g];delete k[g]}}for(var e in k){f[e]=k[e]}return f},combineParam:function(j,f,h,k){var e=[];for(var i in f){if(k||!j.hasOwnProperty(i)){e.push(i+"="+f[i]);delete j[i]}}for(var g in j){e.push(g+"="+j[g])}return e.join(h)},parseParam:function(h,l){var k,f=null,j={};if(this.isString(h)&&h.length>0){k=h.split(l);for(var g=0,e=k.length;g<e;++g){f=k[g].split("=");j[f[0]]=f[1]}}return j},on:function(g,e,f){var h;if(g.addEventListener){h=function(k,i,j){k.addEventListener(i,j,false)}}else{if(g.attachEvent){h=function(k,i,j){k.attachEvent("on"+i,j)}}else{h=function(k,i,j){k["on"+i]=j}}}h(g,e,f);a.tools.on=h},off:function(g,e,f){var h;if(g.removeEventListener){h=function(k,i,j){k.removeEventListener(i,j,false)}}else{if(g.detachEvent){h=function(k,i,j){k.detachEvent("on"+i,j)}}else{h=function(k,i,j){k["on"+i]=null}}}h(g,e,f);a.tools.off=h},random:function(){return Math.round(Math.random()*2147483647)},getReferrer:function(){var f,g=c.doc.referrer;try{f=g||c.opener.location.href||"-"}catch(h){f="-"}return f},sampling:function(){return(Math.random()-d.samplerate)<=0},trimHttpStr:function(e){return e.substr(e.indexOf("://")+2)},randomPageId:function(){var e=c.win.dmtrack_pageid||"",g=+new Date(),f="";e+=g;e=e.substr(0,20);while(e.length<42){e+=this.random()}f=e.substr(0,42);c.pageId=f;c.win.dmtrack_pageid=f;return f},sendErrorInfo:function(i,h){var f=d.errorSever,g=a.moduleManager.require("recorder"),j={type:h,exception:i.message};g.send(f,j)},emptyFunction:function(){}}})(MAGNETO);(function(a){a.moduleManager=function(){var f=a.globals,e=f.doc,d=a.tools,c={},b=function(i){var h=f.jsUrlHash[i];return h?f.jsUrlRoot+h:null},g=function(){var h=function(j,k){var l,i=e.createElement("script");i.src=j;if(k){i.onload=i.onreadystatechange=function(){if(!this.readyState||"loaded"===i.readyState||"complete"===i.readyState){i.onload=i.onreadystatechange=null;k()}}}l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(i,l)};return{load:h}}();return{register:function(k,h,j){var i=this;if(i.hasRegistered(k)){return}c[k]=j?h.call(a):h},require:function(k,j){var i=c[k],h;if(d.isFunction(i)){return c[k]=i.call(a)}else{if(i){return i}}h=b(k);if(h!==null){g.load(h,function(){c[k]=c[k].call(a);(j||d.emptyFunction).call(null,c[k])})}return null},hasRegistered:function(h){return !!c[h]},hadUsed:function(i){var h=c[i];return h&&!d.isFunction(h)}}}()})(MAGNETO);(function(a){a.taskManager=function(){var g=a.globals,f=g.win,e=function(k){try{var i=+new Date(),h=+new Date(k);return h-i>=0}catch(j){return false}},d=a.tools,b=a.moduleManager.require,c=function(l){var j=l.name,h=l.endTime,k=l.samplerate,i=l.config;if(h&&!e(h)){return}b(j,function(m){m.init(k,i)})};return{push:function(h){var i=[];if(!h){return}if(!d.isArray(h)){i.push(h)}else{i=h}d.on(f,"load",function(){for(var k=0,j=i.length;k<j;k++){c(i.pop())}})}}}()})(MAGNETO);(function(a){a.moduleManager.register("recorder",function(){var g=this,e=g.globals,c=g.tools,f=function(k,l,m){var j=new Image(1,1);j.src=k+"?"+l;j.onload=function(){this.onload=null;(m||c.emptyFunction)()}},i=function(j,m,n){var k=e.win.XDomainRequest,l;if(k){l=new k;l.open("POST",j)}else{l=new XMLHttpRequest;if("withCredentials" in l){l.open("POST",j,true);l.setRequestHeader("Content-Type","text/plain")}}if(l){l.onreadystatechange=function(){if(l.readyState==4){n&&n();l=null}};l.send(m);return true}return false},b=function(){},d=function(q){var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p,o,m,j=q.length,n=0,l="";while(n<j){p=q.charCodeAt(n++)&255;if(n==j){l+=k.charAt(p>>2);l+=k.charAt((p&3)<<4);l+="==";break}o=q.charCodeAt(n++);if(n==j){l+=k.charAt(p>>2);l+=k.charAt(((p&3)<<4)|((o&240)>>4));l+=k.charAt((o&15)<<2);l+="=";break}m=q.charCodeAt(n++);l+=k.charAt(p>>2);l+=k.charAt(((p&3)<<4)|((o&240)>>4));l+=k.charAt(((o&15)<<2)|((m&192)>>6));l+=k.charAt(m&63)}return l},h=function(m,j){var n="",k="",l=[];if(m&&!c.isEmptyObject(m)){n=d(c.combineParam(m,{},"&"))}j.ver=e.version;j.t=+new Date();k=c.combineParam(j,{},"&");if(n){l.push(n)}if(k){l.push(k)}return l.join("&")};return{sendEssentialInfo:function(k,l,j,o){var m=this,n=h(l,j);m.send(k,n,o)},send:function(k,m,n){var j=m.length;if(j<=2036){f(k,m,n)}else{if(j<=8192){f(k,"len="+j+"&"+m,n)}else{f(k,"err=len&len="+j+"&"+m,n)}}}}},true)})(MAGNETO);(function(a){a.moduleManager.register("cookieProcessor",function(){var f=this,c=f.tools,e=f.globals,d=e.doc,h=function(n){var q=n.split(/;\s/g),l=null,o=null,k=null,p={};if(c.isString(n)&&n.length>0){for(var m=0,j=q.length;m<j;m++){k=q[m].match(/([^=]+)=/i);if(k instanceof Array){l=unescape(k[1]);o=unescape(q[m].substring(k[1].length+1))}else{l=unescape(q[m]);o=""}p[l]=o}}return p},b=function(j){var i=new Date;j=new Date(i.getTime()+j);return";expires="+j.toGMTString()},g=function(j,l,i,n,k,m){var o=escape(j)+"="+escape(l);if(i instanceof Date){o+="; expires="+i.toUTCString()}if(c.isNumber(i)&&i!==0){o+=b(i*24*60*60*1000)}if(c.isString(n)&&n!==""){o+="; path="+n}if(c.isString(k)&&k!==""){o+="; domain="+k}if(m===true){o+="; secure"}return o};return{get:function(i){if(!c.isString(i)||i===""){return null}var j=h(d.cookie);return i in j?j[i]:null},getSub:function(i,j){var k=this.getSubCookies(i);if(k){if(!c.isString(j)||j===""){return null}return j in k?k[j]:null}else{return null}},getSubCookies:function(i){var j=this.get(i),k;if(j){k=c.parseParam(j,"|");return k}else{return null}},set:function(j,k,i){i=i||{};if(c.isString(j)&&k!==undefined){var l=g(j,k,i.expires,i.path,i.domain,i.secure);d.cookie=l}},setSub:function(j,l,k,i){if(!c.isString(j)||j===""){return}if(!c.isString(l)||l===""){return}if(c.isUndefined(k)){return}var m=this.getSubCookies(j),n={};if(m===null){m={}}n[l]=k;this.set(j,c.combineParam(m,n,"|",true),i)},setSubs:function(j,l,i){if(!c.isString(j)||j===""){return}var k=this.getSubCookies(j)||{};this.set(j,c.combineParam(k,l,"|",true),i)},remove:function(j,i){i=i||{};var k=g(j,"",new Date(0),i.path,i.domain,i.secure);d.cookie=k},removeSub:function(i,j){if(!c.isString(i)||i===""){return}if(!c.isString(j)||j===""){return}var k=this.getSubCookies(i);if(k&&k.hasOwnProperty(j)){delete k[j];this.set(i,c.combineParam(k,{},"|"))}}}},true)})(MAGNETO);(function(a){a.moduleManager.register("ua",function(){var k=this,q=k.globals,o={trident:0,webkit:0,gecko:0,presto:0,khtml:0,name:"other",ver:null},i={ie:0,firefox:0,chrome:0,safari:0,opera:0,konq:0,name:"other",ver:null},j={name:"",ver:null},c={win:false,mac:false,x11:false,name:"other"},d="other",e=q.win,p=e.navigator,b=p.userAgent,f=p.platform,h,l,g=function(r){var t=0;return parseFloat(r.replace(/\./g,function(){return(t++===0)?".":""}))};if(e.opera){o.ver=i.ver=g(e.opera.version());o.presto=i.opera=parseFloat(o.ver);o.name="presto";i.name="opera"}else{if(/AppleWebKit\/(\S+)/.test(b)){o.ver=g(RegExp["$1"]);o.webkit=o.ver;o.name="webkit";if(/Chrome\/(\S+)/.test(b)){i.ver=g(RegExp["$1"]);i.chrome=i.ver;i.name="chrome"}else{if(/Version\/(\S+)/.test(b)){i.ver=g(RegExp["$1"]);i.safari=i.ver;i.name="safari"}else{var n=1;if(o.webkit<100){n=1}else{if(o.webkit<312){n=1.2}else{if(o.webkit<412){n=1.3}else{n=2}}}i.safari=i.ver=n;i.name="safari"}}}else{if(/KHTML\/(\S+)/.test(b)||/Konqueror\/([^;]+)/.test(b)){o.ver=i.ver=g(RegExp["$1"]);o.khtml=i.konq=o.ver;o.name="khtml";i.name="konq"}else{if(/rv:([^\)]+)\) Gecko\/\d{8}/.test(b)){o.ver=g(RegExp["$1"]);o.gecko=o.ver;o.name="gecko";if(/Firefox\/(\S+)/.test(b)){i.ver=g(RegExp["$1"]);i.firefox=i.ver;i.name="firefox"}}else{if(/MSIE ([^;]+)/.test(b)){o.ver=i.ver=g(RegExp["$1"]);o.trident=i.ie=o.ver;o.name="trident";i.name="ie"}}}}}j.name=i.name;j.ver=i.ver;if(h=b.match(/360SE/)){j.name="se360";j.ver=3}else{if((h=b.match(/Maxthon/))&&(l=e.external)){j.name="maxthon";try{j.ver=g(l.max_version)}catch(m){j.ver=0.1}}else{if(h=b.match(/TencentTraveler\s([\d.]*)/)){j.name="tt";j.ver=g(h[1])||0.1}else{if(h=b.match(/TheWorld/)){j.name="theworld";j.ver=3}else{if(h=b.match(/SE\s([\d.]*)/)){j.name="sougou";j.ver=g(h[1])||0.1}}}}}c.win=f.indexOf("Win")==0;c.mac=f.indexOf("Mac")==0;c.x11=(f=="X11")||(f.indexOf("Linux")==0);if(c.win){if(/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(b)){if(RegExp["$1"]=="NT"){switch(RegExp["$2"]){case"5.1":c.win="XP";break;case"6.1":c.win="7";break;case"5.0":c.win="2000";break;case"6.0":c.win="Vista";break;default:c.win="NT";break}}else{if(RegExp["$1"]=="9x"){c.win="ME"}else{c.win=RegExp["$1"]}}}c.name="windows"+c.win}if(c.mac){c.name="mac"}if(c.x11){c.name="x11"}if(c.win=="CE"){d="windows mobile"}else{if(/ Mobile\//.test(b)){d="apple"}else{if((h=b.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))){d=h[0].toLowerCase()}}}return{engine:o,browser:i,extraBrowser:j,system:c,mobile:d,resolution:e.screen.width+"*"+e.screen.height,language:p.language||p.browserLanguage}})})(MAGNETO);(function(a){a.moduleManager.register("essential",function(){var i=this,o=a.globals,n=i.moduleManager,f=i.tools,c=i.config,d=n.require("cookieProcessor"),g=n.require("recorder"),k=n.require("ua"),l=o.customize,h=function(){var q,r=d.get("__cn_logon__")==="true";return r},m=function(){var q=o.win.dmtrack_c;if(!q||q==="{-}"){return{}}q=q.substring(1,q.length-1).replace(/ali_resin_trace=/,"");return f.parseParam(q,"|")},e=function(){try{var s=f.getReferrer(),t=f.random(),q=l.acookieAdditional||{},r={cache:t,pre:s};g.sendEssentialInfo(c.acookieSever,{},f.combineJson(r,q))}catch(u){f.sendErrorInfo(u,"acookie")}},b=function(){var t=k.extraBrowser,q=t.name+t.ver.toFixed(1),r=k.system.name,s=q+"|"+r+"|"+k.resolution+"|"+k.language;return s},j=function(v){var t=l.needCookies,s=c.needDefaultCookies,q,r,u="-";if(f.isArray(s)&&t!=undefined){s=s.concat(t)}q=s.length;while(q--){r=s[q];u=d.get(r)||"-";v[r]=u}},p=function(){if(!f.sampling()){return}try{var v=encodeURI(f.getReferrer()),t=d.getSubCookies("ali_apache_track")||{},s=c.logSeverOne,u=m(),r=d.getSubCookies("aliBeacon_bcookie")||{},q=encodeURI(o.doc.location.href);if(c.isSetCookieToAcookie){e()}j(t);if(c.isCheckLogin&&u.c_signed==undefined){u.c_signed=h()?1:0}f.combineJson(u,r,true);d.remove("aliBeacon_bcookie");g.sendEssentialInfo(s,{p:"{"+c.siteNo+"}",u:"{"+f.trimHttpStr(q)+"}",m:"{GET}",s:"{200}",r:"{"+v+"}",a:"{"+f.combineParam(t,{},"|")+"}",b:"{-}",c:"{"+f.combineParam(u,r,"|",true)+"}"},{pageid:f.randomPageId(),sys:b()})}catch(w){f.sendErrorInfo(w,"essential")}};return{init:p}},true)})(MAGNETO);(function(b){var e=b.globals,d=e.doc,a=b.tools,g=b.config,h=b.moduleManager,c=h.require("recorder"),f=h.require("cookieProcessor");b.api={log:function(j,n){try{var m={},k={},i=j.split("?");if(i[1]!==undefined){k=a.parseParam(i[1],"&")}if(a.isString(n)){if(n.substring(0,1)==="?"){n=n.substring(1)}m=a.parseParam(n,"&")}else{if(a.is(n,Object)){m=n}}m.st_page_id=e.pageId;c.sendEssentialInfo(i[0],{},a.combineJson(m,k))}catch(l){a.sendErrorInfo(l,"log")}},asysLog:function(i,j,l){try{if(!j||j==="-"){j=d.location.href}c.sendEssentialInfo(g.logSeverTwo,{p:"{"+g.siteNo+"}",u:"{"+a.trimHttpStr(i)+"}",m:"{GET}",s:"{200}",r:"{"+j+"}",a:"{"+f.get("ali_apache_track")+"}",b:"{-}",c:"{"+a.combineParam(l||{},{},"|")||"-}"},{pageid:a.randomPageId()})}catch(k){a.sendErrorInfo(k,"asysLog")}},flashLog:function(j,k){try{var i=e.win.dmtrack_c;if(!i||i==="{-}"){i="-"}else{i=i.substring(1,i.length-1).replace(/ali_resin_trace=/,"")}if(!k||k==="-"){k=d.location.href}c.sendEssentialInfo(g.logSeverTwo,{p:"{"+g.siteNo+"}",u:"{"+j+"}",m:"{GET}",s:"{200}",r:"{"+k+"}",a:"{"+f.get("ali_apache_track")+"}",b:"{-}",c:"{"+i+"}"},{pageid:a.randomPageId(),dmtrack_type:"xuanwangpu"})}catch(l){a.sendErrorInfo(l,"asysLog")}}}})(MAGNETO);(function(b){var d=b.globals,c=d.win,e=b.config,a=b.api;c.sk_dmtracking=function(){if(d.isConflicted===true){return}b.moduleManager.require("essential").init()};c.dmtrack={clickstat:function(f,g){a.log(f,g)},tracelog:function(f){a.log(e.tracelogSever,{tracelog:f})},beacon_click:function(f,g,h){a.asysLog(f,g,h)},flash_dmtracking:function(f,g){a.flashLog(f,g)}}})(MAGNETO);
