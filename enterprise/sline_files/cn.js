(function(e,t){var r=!0,n=e.document,a=n.location,o=a.protocol,c=(new Date).getTime();if(e.Manifold===t){Manifold={},r=!1;var s={opener:opener,pageId:null,customize:e.WolfSmoke||{},version:"2.1"},u={samplerate:s.customize.samplerate||1,siteNo:s.customize.siteNo||2,logSeverOne:o+"//dmtracking.1688.com/b.jpg",logSeverTwo:o+"//dmtracking.1688.com/c.jpg",tracelogSever:o+"//stat.1688.com/tracelog/click.html",errorSever:o+"//stat.1688.com/dw/error.html",spmServer:o+"//stat.1688.com/spm.html",acookieSever:o+"//acookie.1688.com/1.gif",changeServer:o+"//pass.alibaba.com/read_cookie.htm",firstUserServer:o+"//check.china.alibaba.com/cta/cucrpc/getCookieId.jsonp",needDefaultCookies:["cna","ali_apache_id"],isCheckLogin:!0,isSetCookieToAcookie:!0,is1688:/\b1688\.com$/.test(a.hostname)},m={isObject:function(e){return e===Object(e)},isFunction:function(e){return"function"==typeof e},isNumber:function(e){return"number"==typeof e&&"[object Number]"==Object.prototype.toString.call(e)},isString:function(e){return"string"==typeof e||"[object String]"==Object.prototype.toString.call(e)},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){for(var t in e)return!1;return!0},trim:function(e){return this.isString(e)?String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,""):""},btoa:function(t){if(e.btoa)return e.btoa(t);var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(len=t.length,i=0,out="";len>i;){if(c1=255&t.charCodeAt(i++),i===len){out+=r.charAt(c1>>2),out+=r.charAt((3&c1)<<4),out+="==";break}if(c2=t.charCodeAt(i++),i===len){out+=r.charAt(c1>>2),out+=r.charAt((3&c1)<<4|(240&c2)>>4),out+=r.charAt((15&c2)<<2),out+="=";break}c3=t.charCodeAt(i++),out+=r.charAt(c1>>2),out+=r.charAt((3&c1)<<4|(240&c2)>>4),out+=r.charAt((15&c2)<<2|(192&c3)>>6),out+=r.charAt(63&c3)}return out},combineJson:function(e,t,r){var n={};for(var a in t)(r||!e.hasOwnProperty(a))&&(n[a]=t[a],delete e[a]);for(var o in e)n[o]=e[o];return n},combineParam:function(e,t,r,n){var a=[];for(var o in t)(n||!e.hasOwnProperty(o))&&(a.push(o+"="+t[o]),delete e[o]);for(var i in e)a.push(i+"="+e[i]);return a.join(r)},parseParam:function(e,t){var r,n=null,a={};if(this.isString(e)&&e.length){r=e.split(t);for(var o=0,i=r.length;i>o;o++)n=r[o].split("="),a[n[0]]=n[1]}return a},random:function(){return Math.round(2147483647*Math.random())},getReferrer:function(){var e="-";try{e=n.referrer||s.opener.location.href||"-"}catch(t){e="-"}return e},randomPageId:function(){var t=(e.dmtrack_pageid||"")+c;for(t=t.substr(0,20);42>t.length;)t+=m.random();return t=t.substr(0,42),s.pageId=e.dmtrack_pageid=e.unique_pageid=t,t},sampling:function(){return 0>=Math.random()-u.samplerate},trimHttpStr:function(e){return e.substr(e.indexOf("://")+2)}},f=function(){var t=function(t,r,n){var a,o=new Image,i="_img_"+m.random(),c=-1==t.indexOf("?")?"?":"&",s=r?m.isString(r)?r:"":"";return e[i]=o,o.onload=o.onerror=function(){e[i]=null,!n||n()},o.src=a=s?t+c+s:t,o=null,a},r=function(e,t){var r=n.getElementsByTagName("head")[0],a=n.createElement("script"),o=!1;a.src=e,a.async=!0;var i=t;m.isFunction(i)&&(a.onerror=function(t){i({url:e,event:t})}),a.onload=a.onreadystatechange=function(){o||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o=!0,a.onload=a.onreadystatechange=null,a&&a.parentNode&&a.parentNode.removeChild(a))},r.appendChild(a)},a=function(e,t){var r="",n="",a=[];return e&&!m.isEmptyObject(e)&&(r=m.btoa(m.combineParam(e,{},"&"))),t.ver=s.version,t.t=c,n=m.combineParam(t,{},"&"),r&&a.push(r),n&&a.push(n),a.join("&")};return{loadScript:r,jsonp:function(t,n,a,o){o=o||"callback",n=n||{};var i=-1===(t||"").indexOf("?")?"?":"&",s=o+"_json"+c;for(var u in n)n.hasOwnProperty(u)&&(i+=encodeURIComponent(u)+"="+encodeURIComponent(n[u])+"&");return e[s]=function(t){a(t);try{delete e[s]}catch(r){}e[s]=null},r(t+i+o+"="+s),s},send:function(e,r,n){var a=r.length;2048>=a?t(e,r,n):8192>=a?t(e,"len="+a+"&"+r,n):t(e,"err=len&len="+a+"&"+r,n)},sendStat:function(e,t,r,n){var o=a(t,r);this.send(e,o,n)},sendError:function(e,t,r){var n="type="+t+"&exception="+e.message;this.send(u.errorSever,n,r)}}}(),l=function(){var e=function(e){var t={};if(e&&m.isString(e))for(var r=e.split(/;\s/g),n="",a="",o="",i=0,c=r.length;c>i;i++)o=r[i].match(/([^=]+)=/i),m.isArray(o)?(n=unescape(o[1]),a=unescape(r[i].substring(o[1].length+1))):(n=unescape(r[i]),a=""),t[n]=a;return t},t=function(e){return e=new Date(c+e),";expires="+e.toGMTString()},r=function(e,r,n){var a=n.expires||1,o=n.path||"",i=n.domain||"",c=n.secure||!1,s=escape(e)+"="+escape(r);return a instanceof Date&&(s+="; expires="+a.toUTCString()),a&&m.isNumber(a)&&(s+=t(1e3*60*60*24*a)),o&&m.isString(o)&&(s+="; path="+o),i&&m.isString(i)&&(s+="; domain="+i),c&&(s+="; secure"),s};return{get:function(t){if(!t||!m.isString(t))return null;var r=e(n.cookie);return t in r?r[t]:null},getSub:function(e,t){var r=this.getSubCookies(e);return r?t&&m.isString(t)?t in r?r[t]:null:null:null},getSubCookies:function(e){var t=this.get(e),r=m.parseParam(t,"|");return r},set:function(e,t,a){if(a=a||{},t&&m.isString(e)){var o=r(e,t,a);n.cookie=o}},setSub:function(e,t,r,n){if(e&&m.isString(e)&&t&&m.isString(t)&&r){var a=this.getSubCookies(e)||{},o={};o[t]=r,this.set(e,m.combineParam(a,o,"|",!0),n)}},setSubs:function(e,t,r){if(e&&m.isString(e)){var n=this.getSubCookies(e)||{};this.set(e,m.combineParam(n,t,"|",!0),r)}},remove:function(e){n.cookie=r(e,"",{expires:new Date(0)})},removeSub:function(e,t){if(e&&m.isString(e)&&t&&m.isString(t)){var r=this.getSubCookies(e);r&&r.hasOwnProperty(t)&&(delete r[t],this.set(e,m.combineParam(r,{},"|")))}}}}(),p=Manifold.UA=function(){var t,r,n={trident:0,webkit:0,gecko:0,presto:0,khtml:0,name:"other",ver:null},a={ie:0,firefox:0,chrome:0,safari:0,opera:0,konq:0,name:"other",ver:null},o={name:"",ver:null},i={win:!1,mac:!1,x11:!1,name:"other"},c="other",s=e.navigator,u=s.userAgent,m=s.platform,f=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 0===t++?".":""}))};if(e.opera)n.ver=a.ver=f(e.opera.version()),n.presto=a.opera=parseFloat(n.ver),n.name="presto",a.name="opera";else if(/AppleWebKit\/(\S+)/.test(u))if(n.ver=f(RegExp.$1),n.webkit=n.ver,n.name="webkit",/Chrome\/(\S+)/.test(u))a.ver=f(RegExp.$1),a.chrome=a.ver,a.name="chrome";else if(/Version\/(\S+)/.test(u))a.ver=f(RegExp.$1),a.safari=a.ver,a.name="safari";else{var l=1;l=100>n.webkit?1:312>n.webkit?1.2:412>n.webkit?1.3:2,a.safari=a.ver=l,a.name="safari"}else/KHTML\/(\S+)/.test(u)||/Konqueror\/([^;]+)/.test(u)?(n.ver=a.ver=f(RegExp.$1),n.khtml=a.konq=n.ver,n.name="khtml",a.name="konq"):/rv:([^\)]+)\) Gecko\/\d{8}/.test(u)?(n.ver=f(RegExp.$1),n.gecko=n.ver,n.name="gecko",/Firefox\/(\S+)/.test(u)&&(a.ver=f(RegExp.$1),a.firefox=a.ver,a.name="firefox")):/IE ([^;]+)/.test(u)&&(n.ver=a.ver=f(RegExp.$1),n.trident=a.ie=n.ver,n.name="trident",a.name="ie");if(o.name=a.name,o.ver=a.ver,t=u.match(/360SE/))o.name="se360",o.ver=3;else if((t=u.match(/Maxthon/))&&(r=WIN.external)){o.name="maxthon";try{o.ver=f(r.max_version)}catch(p){o.ver=.1}}else(t=u.match(/TencentTraveler\s([\d.]*)/))?(o.name="tt",o.ver=f(t[1])||.1):(t=u.match(/TheWorld/))?(o.name="theworld",o.ver=3):(t=u.match(/SE\s([\d.]*)/))&&(o.name="sougou",o.ver=f(t[1])||.1);if(i.win=0==m.indexOf("Win"),i.mac=0==m.indexOf("Mac"),i.x11="X11"==m||0==m.indexOf("Linux"),i.win){if(/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(u))if("NT"==RegExp.$1)switch(RegExp.$2){case"5.0":i.win="2000";break;case"5.1":i.win="XP";break;case"6.0":i.win="Vista";break;case"6.1":i.win="7";break;case"6.3":i.win="8";break;default:i.win="NT"}else i.win="9x"==RegExp.$1?"ME":RegExp.$1;i.name="windows"+i.win}return i.mac&&(i.name="mac"),i.x11&&(i.name="x11"),"CE"==i.win?c="windows mobile":/ Mobile\//.test(u)?c="apple":(t=u.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))&&(c=t[0].toLowerCase()),{engine:n,browser:a,extraBrowser:o,system:i,mobile:c,resolution:e.screen.width+"*"+e.screen.height,language:s.language||s.browserLanguage}}(),g=Manifold.SPM=function(){var r=!0,a=!1,o="data-spm",i="data-spm-anchor-id",c="data-spm-protocol",l=a,p={},g=a,d="",h="",v=u.spmServer,b=!!n.attachEvent,S="attachEvent",k="addEventListener",w=b?S:k,y=a,_=function(e,t){return e.indexOf(t)>-1},x=function(e){var t;try{t=m.trim(e.getAttribute("href",2))}catch(r){}return t||""},E=function(e,t){return e&&e.getAttribute?e.getAttribute(t)||"":""},C=function(e,t,r){if(e&&e.setAttribute)try{e.setAttribute(t,r)}catch(n){}},N=function(e){var t,r;try{return t=[].slice.call(e)}catch(n){t=[],r=e.length;for(var a=0;r>a;a++)t.push(e[a]);return t}},j=function(t,r,n){t[w]((b?"on":"")+r,function(t){t=t||e.event;var r=t.target||t.srcElement;n(t,r)},a)},A=function(){return n.getElementsByTagName("meta")},O=function(){var e,t,r,n,a=A();for(e=0,t=a.length;t>e;e++)r=a[e],n=E(r,"name"),n===o&&(h=E(r,c),d=E(r,"content"))},P=function(){var t,r="",a="";return O(),e._SPM_a&&e._SPM_b&&(r=e._SPM_a.replace(/^{(\w+)}$/g,"$1"),a=e._SPM_b.replace(/^{(\w+)}$/g,"$1"),"{}"!==r&&"{-}"!==r&&"{}"!==a&&"{-}"!==a&&(l="true")),r&&a&&"{}"!==r&&"{}"!==a&&"{-}"!==r&&"{-}"!==a||(r=d,a=E(n.body,"data-spm")||0),t=r+"."+a,r&&a&&/^[\w\-\*]+\.[\w\-\*]+$/.test(t)||(t=0),t}(),T=function(e){for(var t;(e=e.parentNode)&&"BODY"!=e.tagName;)if(t=E(e,c))return t;return""},L=function(t){e.jQuery?jQuery(n).ready(t):"complete"===n.readyState?t():j(e,"load",t)},M=function(){if(!g){if(!e.spmData)return y||setTimeout(arguments.callee,100),t;g=r;var n,a,o,i,c=e.spmData.data;if(c&&m.isArray(c))for(n=0,a=c.length;a>n;n++)o=c[n],i=o.xpath,p[i]={spmc:o.spmc,spmd:o.spmd}}},I=function(e){var t,r,a,o,i,c,s=n.getElementsByTagName("*");for(t=[];e&&1==e.nodeType;e=e.parentNode)if(e.id){for(c=e.id,o=0,r=0;s.length>r;r++)if(i=s[r],i.id&&i.id==c){o++;break}if(1==o)return t.unshift('id("'+c+'")'),t.join("/");t.unshift(e.tagName.toLowerCase()+'[@id="'+c+'"]')}else{for(r=1,a=e.previousSibling;a;a=a.previousSibling)a.tagName==e.tagName&&r++;t.unshift(e.tagName.toLowerCase()+"["+r+"]")}return t.length?"/"+t.join("/"):null},$=function(e){var t=p[I(e)];return t?t.spmc:""},R=function(e){return e?!!e.match(/^[^\?]*\balipay\.(?:com|net)\b/i):!1},B=function(e){var t,r,n;return l?(r=I(e),n=p[r],n&&(t=n.spmd)):(t=E(e,o),t&&t.match(/^d\w+$/)||(t="")),t},D=function(e){return e&&/&?\bspm=[^&#]*/.test(e)&&(e=e.replace(/&?\bspm=[^&#]*/g,"").replace(/&{2,}/g,"&").replace(/\?&/,"?").replace(/\?$/,"")),e},U=function(e,t){if(e=D(e),!t)return e;var r,n,a,o,i,c,s,u="&";if(-1!=e.indexOf("#")&&(a=e.split("#"),e=a.shift(),n=a.join("#")),o=e.split("?"),i=o.length-1,a=o[0].split("//"),a=a[a.length-1].split("/"),c=a.length>1?a.pop():"",i>0&&(r=o.pop(),e=o.join("?")),r&&i>1&&-1==r.indexOf("&")&&-1!=r.indexOf("%")&&(u="%26"),e=e+"?spm="+t+(r?u+r:"")+(n?"#"+n:""),s=_(c,".")?c.split(".").pop().toLowerCase():""){if({png:1,jpg:1,jpeg:1,gif:1,bmp:1,swf:1}.hasOwnProperty(s))return 0;!r&&1>=i&&(n||{htm:1,html:1,php:1}.hasOwnProperty(s)||(e+="&file="+c))}return e},F=function(e,t){var r=e,n=x(r),a="i"==(E(r,c)||T(r)||h),o=v+"?spm=";n&&t&&(0===n.indexOf("#")||0===n.toLowerCase().indexOf("javascript:")||R(n)||(a?(n=D(n),o+=t+"&st_page_id="+s.pageId+"&url="+encodeURIComponent(n)+"&cache="+m.random(),f.send(o,"")):(n=U(n,t))&&W(r,n)))},W=function(e,t){var r,a=e,o=a.innerHTML;o&&-1==o.indexOf("<")&&(r=n.createElement("b"),r.style.display="none",a.appendChild(r)),a.href=t,r&&a.removeChild(r)},q=function(e){var t=e,r=[P,0,0].join(".");F(t,r)},z=function(e){for(var t,r=e.tagName.toLowerCase(),n={};e&&"html"!==r&&"body"!==r;){if(t=l?$(e):E(e,o)){n={spmEl:e,spmId:t};break}if(!(e=e.parentNode))break;r=e.tagName.toLowerCase()}return n},G=function(e,t){var r=e,n=t.spmEl,a=t.spmId,o=[P,a].join(".");if(o.match&&o.match(/^[\w\-\*]+\.[\w\-\*]+\.[\w\-\*]+$/))for(var c,s,u,m=N(n.getElementsByTagName("a")),f=N(n.getElementsByTagName("area")),l=m.concat(f),p=0,g=0,d=l.length;d>g;g++)if(c=l[g],s=x(c),s&&(p++,c===r)){u=o+"."+(B(c)||p),C(c,i,u);break}},H=function(e){var r,n=e,a=E(n,i);if(!a){if(r=z(n.parentNode),!r.spmId)return q(n),t;G(n,r),a=E(n,i)}F(n,a)},J=function(){L(function(){y=r,P&&(M(),j(n.body,"mousedown",function(e,t){for(var r;t&&(r=t.tagName.toLowerCase());){if("a"===r||"area"===r){H(t);break}if("body"===r||"html"===r)break;t=t.parentNode}}))})};return{cnt:P,init:J}}(),d=Manifold.Essential=function(){var t=function(){var e="true"===l.get("__cn_logon__");return e},r=function(){var t=e.dmtrack_c;return t&&"{-}"!==t?(t=t.substring(1,t.length-1).replace(/ali_resin_trace=/,""),m.parseParam(t,"|")):{}},n=function(){try{var e=m.getReferrer(),t=m.random(),r=s.customize.acookieAdditional||{},n={cache:t,pre:e};f.sendStat(u.acookieSever,{},m.combineJson(n,r))}catch(a){f.sendError(a,"acookie")}},o=function(){var e=p.extraBrowser,t=e.name+e.ver.toFixed(1),r=p.system.name,n=t+"|"+r+"|"+p.resolution+"|"+p.language;return n},i=function(e){var t=s.customize.needCookies,r=u.needDefaultCookies;t&&m.isArray(r)&&(r=r.concat(t));for(var n,a,o=r.length;o--;)n=r[o],a=l.get(n)||"-",e[n]=a};return{send:function(){var e=encodeURI(m.getReferrer()),c=l.getSubCookies("ali_apache_track")||{},s=r(),p=l.getSubCookies("aliBeacon_bcookie")||{},d=encodeURI(a.href);u.isSetCookieToAcookie&&n(),i(c),u.isCheckLogin&&!s.c_signed&&(s.c_signed=t()?1:0),m.combineJson(s,p,!0),l.remove("aliBeacon_bcookie"),f.sendStat(u.logSeverOne,{p:"{"+u.siteNo+"}",u:"{"+m.trimHttpStr(d)+"}",m:"{GET}",s:"{200}",r:"{"+e+"}",a:"{"+m.combineParam(c,{},"|")+"}",b:"{-}",c:"{"+m.combineParam(s,p,"|",!0)+"}"},{spm_cnt:g.cnt,pageid:m.randomPageId(),sys:o()})}}}(),h=Manifold.api={log:function(e,t){try{var r={},n={},a=e.split("?");a[1]&&(n=m.parseParam(a[1],"&")),m.isString(t)?("?"===t.substring(0,1)&&(t=t.substring(1)),r=m.parseParam(t,"&")):m.isObject(t)&&(r=t),r.st_page_id=s.pageId,f.sendStat(a[0],{},m.combineJson(r,n))}catch(o){f.sendError(o,"log")}},asysLog:function(e,t,r){try{t&&"-"!==t||(t=a.href),f.sendStat(u.logSeverTwo,{p:"{"+u.siteNo+"}",u:"{"+m.trimHttpStr(e)+"}",m:"{GET}",s:"{200}",r:"{"+t+"}",a:"{"+l.get("ali_apache_track")+"}",b:"{-}",c:"{"+m.combineParam(r||{},{},"|")||"-}"},{pageid:m.randomPageId()})}catch(n){f.sendError(n,"asysLog")}},flashLog:function(t,r){try{var n=e.dmtrack_c;n=n&&"{-}"!==n?n.substring(1,n.length-1).replace(/ali_resin_trace=/,""):"-",r&&"-"!==r||(r=a.href),f.sendStat(u.logSeverTwo,{p:"{"+u.siteNo+"}",u:"{"+t+"}",m:"{GET}",s:"{200}",r:"{"+r+"}",a:"{"+l.get("ali_apache_track")+"}",b:"{-}",c:"{"+n+"}"},{pageid:m.randomPageId(),dmtrack_type:"xuanwangpu"})}catch(o){f.sendError(o,"flashLog")}}};if(e.dmtrack={clickstat:function(e,t){h.log(e,t)},clickunite:function(e){h.log(u.tracelogSever,e)},tracelog:function(e){h.log(u.tracelogSever,{tracelog:e})},beacon_click:function(e,t,r){h.asysLog(e,t,r)},flash_dmtracking:function(e,t){h.flashLog(e,t)}},m.sampling())try{var v=l.get("sync_cookie");u.is1688?v&&"true"===v?d.send():f.jsonp(u.firstUserServer,{},function(e){if(e&&e.content&&e.content.ali_beacon_id)for(var t in e.content)l.set(t,e.content[t]);f.send(u.changeServer,""),d.send()}):(v&&"true"===v||f.send(u.changeServer,""),d.send()),f.loadScript("http://a.tbcdn.cn/s/aplus_b2b.js?t=20130911"),g.init()}catch(b){f.sendError(b,"essential")}}})(window);
