(function(f,k){var i=f.util.substitute,a=FE.util,F=f.support,c,n,A,s,b,v,G,g,y,l={aliDomain:"http://exodus.1688.com",loginchinahttpDomain:"http://login.1688.com",loginchinaDomain:"https://login.1688.com",alipayDomain:"https://auth.alipay.com",logintaobaoDomain:"https://login.taobao.com",jumptaobaoDomain:"http://jump.taobao.com/jump",cbuRegister:"http://exodus.1688.com/member/join/common_join.htm",alipayNotice:"http://member.1688.com/member/alipay/notice_for_pop.htm",taobaoLoginPage:"https://login.taobao.com/member/login.jhtml",memberwebAlipayLogin:"http://member.1688.com/member/alipay/notice.htm",appendTo:"body",dialog:{center:true,fadeIn:300,fadeOut:300}},m={},d={checkcode:"{0}/omeocheckcode",getLastLoginType:"{0}/member/GetLastLoginType.do",loginUrl:"{0}/member/PopSignin.do",urlEmail:"{0}/member/CheckEmailJson.htm",urlId:"{0}/member/CheckLoginIdAndRecommendJson.htm",registUrl:"{0}/member/join/commonPopValidateJoin.htm",urlUM:"{0}/member/popSignin.htm",urlMobile:"{0}/member/checkMobileValidate.htm",urlSendM:"{0}/member/sendIdentityCodeByMobile.htm",urlSendE:"{0}/member/sendIdentityCodeByEmail.htm"},D=false,w=true,e,z,C,j,r,t,o,B,h,q;function x(J,I){var H=w?"m":"e";window.aliclick&&aliclick(J,i(I,[H]))}c=k.logist=function(H){if(typeof H==="string"){if(typeof(c[H])==="function"){return c[H]()}}else{m=f.extend(true,{},l);FE.test["style.exodus2.url"]&&c.switchDomain();H&&(H=c.formatDomain(H));m=f.extend(true,m,H);f.use("web-valid",function(){c._init()})}};f.extend(k.logist,{aliclick:x,_init:function(){f.ajax(i(d.getLastLoginType,[m.loginchinahttpDomain]),{dataType:"jsonp",success:function(J){if(J.success){z=J.checkcodetoken;C=J.data||"";D=J.verifyCode;if(z){if(!t){c._render();c._buildEvent();t=true}var I=FE.util.lastLoginId?0:1;if(m.tab){switch(m.tab){case"login":f(A[0]).triggerHandler("click");v.triggerHandler("click");break;case"regist":f(A[0]).triggerHandler("click");v.triggerHandler("click");break;case"alipay":f(A[0]).triggerHandler("click");s.triggerHandler("click");break;case"taobao":f(A[0]).triggerHandler("click");b.triggerHandler("click");break;default:break}}else{f(A[0]).triggerHandler("click");v.triggerHandler("click")}f.use("ui-dialog",function(){var M={},K=m.dialog.open,L=m.dialog.close;f.extend(M,m.dialog);M.open=function(){o=true;K&&K();x(null,"?tracelog=layer_simple_open")};M.close=function(){L&&L()};n.dialog(M)});if(!f("#umiframe").length){var H=f('<div id="umiframe" style="display:none;"><iframe width="1" height="1" src="http://exodus.1688.com/member/get_umid.htm"></iframe></div>');f("body").append(H)}}}}})},_render:function(){n=f("<div>",{id:"sys-logist",css:{display:"none"}}).addClass("logist-fdev4").html('<div class="wrap">				<div class="title fd-clr">					<h3><img alt="\u963f\u91cc\u5df4\u5df4" src="http://img.china.alibaba.com/cms/upload/member/logo2.gif" /></h3>					<a href="javascript:;" class="close" tabindex="9000"></a>				</div>				<div class="box">				<ul class="tab" style="display: none;"><li>\u4f1a\u5458\u767b\u5f55</li><li>\u514d\u8d39\u6ce8\u518c</li><li><button type="submit"></button></li></ul>				<fieldset style="display: none;">					<div class="b2btype">						<div id="loginchinatype">                            <iframe width="310" height="270" frameborder="no" border="0" scrolling="no" /> 						</div>						<div class="signin-type">            				<a class="taobao-login-trigger" href="javascript:;">\u6dd8\u5b9d\u4f1a\u5458\u767b\u5f55</a>							<a class="free-regist" target="_blank" href="'+l.cbuRegister+'">\u514d\u8d39\u6ce8\u518c</a>						</div>		    			<div class="gray-bg-wrapper">		        			<div class="alipay-login-div">		                		<span>\u539f\u4f7f\u7528\u652f\u4ed8\u5b9d\u767b\u5f55\u4f1a\u5458\uff0c</span><a class="alipay-login-trigger" href="javascript:;">\u70b9\u6b64\u8fdb\u5165&gt;</a>		                	</div>		            	</div>					</div>					<div class="alipaytype" style="display:none;">						<div class="alipay-content"><iframe width="370" height="260" scrolling="no" frameborder="0" src="'+l.alipayNotice+'"></iframe></div>               			<div class="gray-bg-wrapper">	               			<div class="return-cbu-signin" style="width: 370px;">	               				<a href="javascript:;" class="logtype-b2b">&lt;\u8fd4\u56de\u963f\u91cc\u5df4\u5df4\u5e10\u53f7\u767b\u5f55</a>	                       	</div>	                   	</div>					</div>					<div class="taobaotype" style="display:none;">		                <div class="taobao-signin-title">		                    <b>\u6dd8\u5b9d\u4f1a\u5458</b>		                </div>						<div id="logintaobaotype" class="taobao-content"><iframe width="310" height="300" scrolling="no" frameborder="0" src="'+c.generateTaobaoLoginUrl()+'"></iframe></div>               			<div class="gray-bg-wrapper">	               			<div class="return-cbu-signin">	               				<a href="javascript:;" class="logtype-b2b">&lt;\u8fd4\u56de\u963f\u91cc\u5df4\u5df4\u5e10\u53f7\u767b\u5f55</a>	                       	</div>	                   	</div>					</div>				</fieldset>				<div class="done" style="display: none;"></div><div class="done" style="display: none;"></div>			</div></div>').appendTo(m.appendTo||"body")},_buildEvent:function(){var K=f("input.text",n);A=f("ul.tab>li:lt(2)",n);G=f("fieldset",n);g=f("#loginchinatype a.login",n);y=f("a.regist",n);var M=f("dl.action",n),I=f("div.done",n),N=f("div.message",n),P=f("a.close",n),L=false,Q=false,J=f("div.b2btype",n),H=f("div.alipaytype",n),O=f("div.taobaotype",n);v=f("a.logtype-b2b",n);s=f("a.alipay-login-trigger",J);b=f(".taobao-login-trigger",J);P.click(function(R){R.preventDefault();c("close")});A.click(function(U){var T=f(this);if(T.hasClass("current")){return}var S=A.index(T),R=f("input:eq(0)",G[S]);e=S;A.removeClass("current");T.addClass("current");I.hide();G.hide();f([G[S],M[S]||""]).show();if(U.which&&!S){x(null,"?tracelog=signin_simple_tab")}else{if(S===1){x(null,"?tracelog=reg_simple_m_tab1")}}});s.click(function(R){R.preventDefault();J.hide();O.hide();H.show();x(null,"?tracelog=zfbsigin_login_b_login")});v.click(function(R){R.preventDefault();J.show();H.hide();O.hide();x(null,"?tracelog=layer_return1688_20130322")});b.click(function(R){R.preventDefault();J.hide();H.hide();O.show();x(null,"?tracelog=pop_top_tb")});c.initLoginFrame()},initLoginFrame:function(){var H=f("#loginchinatype iframe",n);H.one("load",function(){H.on("load",c.checkIfLoginSuccess)});H.attr("src",c.generateB2BLoginUrl());var I=f("#logintaobaotype iframe",n);I.one("load",function(){I.on("load",c.checkIfLoginSuccess)})},generateB2BLoginUrl:function(){return(p("style.logindailytaobao.url")||"https://login.taobao.com")+"/member/login.jhtml?from=b2b_pop&style=b2b&full_redirect=false&reg="+encodeURIComponent((p("style.exodus2.url")||"http://exodus.1688.com")+"/member/join/common_join.htm")+"&redirectURL="+encodeURIComponent((p("style.jumpdailytaobao.url")||"http://jump.taobao.com")+"/jump?target="+encodeURIComponent((p("style.loginchinahttp.url")||"http://login.1688.com")+"/member/pop_signin_route.htm?from="+encodeURIComponent(location.href)))},checkIfLoginSuccess:function(){if(!o||e){return}c._updateLoginInfo({source:["b2b","taobao"]}).always(function(){if(u()){if(m.onLoginSuccess){m.onLoginSuccess(f("div.done")[0],{},{userid:a.LoginId(),ResultSet:{csrf_token:f("input[name=_csrf_token]").val()}})}}})},_updateLoginInfo:function(I){if("updateLoginInfo" in a){return a.updateLoginInfo(I)}else{var H=new f.Deferred;H.resolve();return H}},checkIfRegSuccess:function(){if(!o||!e){return}c._updateLoginInfo({source:["b2b","taobao"]}).always(function(){if(a.IsLogin()){if(m.onRegistSuccess){m.onRegistSuccess(f("div.done")[1],{},{userid:a.LoginId(),ResultSet:{csrf_token:f("input[name=_csrf_token]").val()}})}}})},close:function(){o=false;c.traceClose();n.dialog("close")},submit:function(){},traceClose:function(){var H={"3":"reg_simple_{0}_close1","4":"reg_simple_{0}_close2","5":"reg_simple_{0}_close3","7":"reg_simple_{0}_close5","8":"reg_simple_{0}_close4","9":"reg_simple_{0}_close6"};x(null,"?tracelog=reg_simple_close")},switchDomain:function(){FE.test["style.loginchina.url"]&&(m.loginchinaDomain=FE.test["style.loginchina.url"]);FE.test["style.loginchinahttp.url"]&&(m.loginchinahttpDomain=FE.test["style.loginchinahttp.url"]);FE.test["style.exodus2.url"]&&(m.aliDomain=FE.test["style.exodus2.url"]);FE.test["style.alipayauth.url"]&&(m.alipayDomain=FE.test["style.alipayauth.url"]);FE.test["style.logindailytaobao.url"]&&(m.logintaobaoDomain=FE.test["style.logindailytaobao.url"]);FE.test["style.jumptaobao.url"]&&(m.jumptaobaoDomain=FE.test["style.jumptaobao.url"])},formatDomain:function(H){H.loginchinaDomain&&(H.loginchinaDomain=c.getDomain(H.loginchinaDomain,"https://"));H.loginchinahttpDomain&&(H.loginchinahttpDomain=c.getDomain(H.loginchinahttpDomain,"http://"));H.aliDomain&&(H.aliDomain=c.getDomain(H.aliDomain,"http://"));return H},getDomain:function(J,K){var I="",H=J.indexOf("http");if(H===0){return J}return K+J},generateAlipayLoginUrl:function(){var H="{0}/login/option.htm?classOption=b2b&center=false&goto={1}",J="{0}/login/alibabacn_trust_login.htm?target={1}",I=m.alipayDomain;J=i(J,[I,encodeURIComponent(location.toString())]);H=i(H,[I,encodeURIComponent(J)]);return H},generateTaobaoLoginUrl:function(){return l.taobaoLoginPage+"?style=mini&full_redirect=false&disableQuickLogin=true&from=b2b_tb_pop&redirectURL="+encodeURIComponent((p("style.jumpdailytaobao.url")||"http://jump.taobao.com")+"/jump?target="+encodeURIComponent((p("style.loginchinahttp.url")||"http://login.1688.com")+"/member/pop_signin_route.htm?from="+encodeURIComponent(location.href)))},isReady:function(){return t},isOpen:function(){return o}});function p(H){return FE.test&&FE.test[H]}function u(){return a.IsLogin()&&!E()}function E(){return !!f.util.cookie("cn_user",{raw:true})||/:/.test(f.util.cookie("__cn_logon_id__",{raw:true}))}f(function(){x(null,"?tracelog=loginreg_"+location.host+location.pathname)})})(jQuery,FE.sys);
